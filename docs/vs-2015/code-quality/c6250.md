---
title: C6250 | Microsoft Docs
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-code-analysis
ms.topic: reference
f1_keywords:
- C6250
helpviewer_keywords:
- C6250
ms.assetid: 6949c9c5-e8bd-4f95-bc80-42073a293357
caps.latest.revision: 21
author: mikeblome
ms.author: mblome
manager: jillfra
ms.openlocfilehash: e3e2b128deb055b11861ecbe1c4dd551d3eff575
ms.sourcegitcommit: bad28e99214cf62cfbd1222e8cb5ded1997d7ff0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/21/2019
ms.locfileid: "74295584"
---
# <a name="c6250"></a>C6250
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

warning C6250: Calling \<function> VirtualFree without the MEM_RELEASE flag may free memory but not address descriptors (VADs); results in address space leaks  
  
 Esta advertencia indica que una llamada a `VirtualFree` sin el marcador `MEM_RELEASE` sólo anula el registro de las páginas, y no las libera. Para anular el registro de las páginas y liberarlas, utilice el marcador `MEM_RELEASE` en una llamada a `VirtualFree`. Si cualquiera de las páginas de la región está confirmada, la función anula el registro y luego las libera. Después de esta operación, las páginas quedan en el estado libre. Si especifica este marcador, `dwSize` debe ser cero y `lpAddress` debe señalar a la dirección base devuelta por la función `VirtualAlloc` al reservar la región. Se produce un error en la función si no se cumple cualquiera de estas condiciones.  
  
 Puede omitir esta advertencia si el código libera el espacio de direcciones más adelante llamando a `VirtualFree` con el marcador `MEM_RELEASE`.  
  
 For more information see [VirtualAlloc](https://go.microsoft.com/fwlink/?LinkId=181201) and [VirtualFree](https://go.microsoft.com/fwlink/?LinkId=181202).  
  
 El uso de las opciones VirtualAlloc y VirtualFree tiene muchos riesgos en cuanto a pérdidas de memoria y excepciones. Para evitar todos estos tipos de problemas de pérdidas de memoria y excepciones, use los mecanismos proporcionados por la Biblioteca de plantillas estándar (STL) de C++. These include [shared_ptr](https://msdn.microsoft.com/library/1469fc51-c658-43f1-886c-f4530dd84860), [unique_ptr](https://msdn.microsoft.com/library/acdf046b-831e-4a4a-83aa-6d4ee467db9a), and [vector](https://msdn.microsoft.com/library/c1431ad8-c0b6-4dbb-89c4-5f651e432d7f). For more information, see [Smart Pointers](https://msdn.microsoft.com/library/909ef870-904c-49b6-b8cd-e9d0b7dc9435) and [C++ Standard Library](https://msdn.microsoft.com/library/a37d3ba3-58af-47c7-9ee2-441ccd7b77ee).  
  
## <a name="example"></a>Ejemplo  
 El siguiente ejemplo de código genera esta advertencia:  
  
```  
#include <windows.h>  
#include <stdio.h>  
#define PAGELIMIT 80              
  
DWORD dwPages = 0;  // count of pages   
DWORD dwPageSize;   // page size   
  
VOID f( )  
{  
  LPVOID lpvBase;            // base address of the test memory  
  SYSTEM_INFO sSysInfo;      // system information  
  
  GetSystemInfo(&sSysInfo);    
  dwPageSize = sSysInfo.dwPageSize;  
  
  // Reserve pages in the process's virtual address space  
  lpvBase = VirtualAlloc(  
                         NULL,                // system selects address  
                         PAGELIMIT*dwPageSize, // size of allocation  
                         MEM_RESERVE,          
                         PAGE_NOACCESS);       
  //  
  // code to access memory   
  // ...  
  
  if (lpvBase != NULL)  
  {  
    if (VirtualFree( lpvBase, 0, MEM_DECOMMIT )) // decommit pages  
      {  
        puts ("MEM_DECOMMIT Succeeded");  
      }  
      else  
      {  
       puts("MEM_DECOMMIT failed");  
      }  
  }  
  else  
  {  
    puts("lpvBase == NULL");  
  }  
}  
```  
  
 Para corregir esta advertencia, utilice el siguiente código de ejemplo:  
  
```  
#include <windows.h>  
#include <stdio.h>  
#define PAGELIMIT 80              
  
DWORD dwPages = 0;  // count of pages   
DWORD dwPageSize;   // page size   
  
VOID f( )  
{  
  LPVOID lpvBase;            // base address of the test memory  
  SYSTEM_INFO sSysInfo;      // system information  
  
  GetSystemInfo(&sSysInfo);    
  dwPageSize = sSysInfo.dwPageSize;  
  
  // Reserve pages in the process's virtual address space  
  lpvBase = VirtualAlloc(  
                         NULL,                // system selects address  
                         PAGELIMIT*dwPageSize, // size of allocation  
                         MEM_RESERVE,          
                         PAGE_NOACCESS);       
  //  
  // code to access memory   
  // ...  
  
  if (lpvBase != NULL)  
  {  
   if (VirtualFree(lpvBase, 0,MEM_RELEASE )) // decommit & release   
   {  
     // code ...  
   }  
   else  
   {  
     puts("MEM_RELEASE failed");  
   }  
  }  
  else   
  {  
    puts("lpvBase == Null ");  
    // code...  
  }  
}  
```

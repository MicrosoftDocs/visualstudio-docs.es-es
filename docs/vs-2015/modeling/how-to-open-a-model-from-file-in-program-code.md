---
title: 'Cómo: abrir un modelo desde un archivo de código de programa | Microsoft Docs'
ms.custom: ''
ms.date: 11/15/2016
ms.prod: visual-studio-tfs-dev14
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: d7d68697-5418-4263-bdb2-48401924ea71
caps.latest.revision: 10
author: gewarren
ms.author: gewarren
manager: douge
ms.openlocfilehash: 5c084e756492a03abc86f7281728222632e12ec1
ms.sourcegitcommit: 240c8b34e80952d00e90c52dcb1a077b9aff47f6
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/23/2018
ms.locfileid: "49940871"
---
# <a name="how-to-open-a-model-from-file-in-program-code"></a>Cómo: Abrir un modelo desde un archivo en el código del programa
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Puede abrir los modelos DSL en cualquier aplicación.  
  
 Desde un [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] extensión, puede usar ModelBus para este propósito. ModelBus proporciona un mecanismo estándar para hacer referencia a un modelo o elementos en un modelo y para buscar el modelo si se ha movido. Para obtener más información, consulte [integrar modelos utilizando Modelbus de Visual Studio](../modeling/integrating-models-by-using-visual-studio-modelbus.md).  
  
## <a name="target-framework"></a>Plataforma de destino  
 Establecer el **.NET framework de destino** de su proyecto de aplicación para **.NET Framework 4**.  
  
#### <a name="to-set-the-target-framework"></a>Para establecer la plataforma de destino  
  
1.  Abra el [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] proyecto para la aplicación en el que desea leer un modelo DSL.  
  
2.  En **el Explorador de soluciones**, haga clic en el proyecto y, a continuación, haga clic en **propiedades**.  
  
3.  En la ventana Propiedades del proyecto, en el **aplicación** pestaña, establezca el **.NET framework de destino** campo **.NET Framework 4**.  
  
> [!NOTE]
>  Es posible que deba hacer esto, incluso si se selecciona **.NET Framework 4** en el cuadro de diálogo de creación de proyecto. La plataforma de destino no debe ser **.NET Framework 4 Client Profile**.  
  
## <a name="references"></a>Referencias  
 Tiene que agregar estas referencias a su [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] proyecto de aplicación:  
  
-   `Microsoft.VisualStudio.Modeling.Sdk.11.0`  
  
    -   Si no ve esto en el **.NET** pestaña en el **agregar referencias** cuadro de diálogo, haga clic en el **examinar** pestaña y vaya a `%Program Files%\Microsoft Visual Studio 2010 SDK\VisualStudioIntegration\Common\Assemblies\`.  
  
-   El ensamblado DSL, que encontrará en la carpeta bin del proyecto DSL. Su nombre suele tener el formato: *suempresa*. *Convertirá*`.Dsl.dll`.  
  
## <a name="important-classes-in-the-dsl"></a>Clases importantes en el DSL  
 Antes de poder escribir el código que lee su DSL, debe saber los nombres de algunas de las clases generadas por su DSL. En la solución DSL, abra el **Dsl** del proyecto y busque en el **GeneratedCode** carpeta. Como alternativa, haga doble clic en el ensamblado del DSL en el proyecto **referencias**y abra el espacio de nombres DSL **Examinador de objetos**.  
  
 Estas son las clases que se deben identificar:  
  
-   *YourDslRootClass* : este es el nombre de la clase raíz en su `DslDefinition.dsl`.  
  
-   *Sunombrededsl* `SerializationHelper` -esta clase se define en `SerializationHelper.cs` en el proyecto DSL.  
  
-   *Sunombrededsl* `DomainModel` -esta clase se define en `DomainModel.cs` en el proyecto DSL.  
  
## <a name="reading-from-a-file"></a>Al leer un archivo  
 El ejemplo siguiente está diseñado para leer un DSL en el que las clases importantes son los siguientes:  
  
- FamilyTreeModel  
  
- FamilyTreeSerializationHelper  
  
- FamilyTreeDomainModel  
  
  La otra clase de dominio en este DSL es la persona.  
  
```  
using System;  
using Microsoft.VisualStudio.Modeling;  
using Company.FamilyTree; // Your DSL namespace  
  
namespace StandaloneReadDslConsole  
{ class Program  
  { static void Main(string[] args)  
    {  
      // The path of a DSL model file:  
      string dslModel = @"C:\FamilyTrees\Tudor.ftree";  
      // Set up the Store to read your type of model:  
      Store store = new Store(  
        typeof(Company.FamilyTree.FamilyTreeDomainModel));  
      // The Model type generated by the DSL:  
      FamilyTreeModel familyTree;  
      // All Store changes must be in a Transaction:  
      using (Transaction t =   
        store.TransactionManager.BeginTransaction("Load model"))  
      {  
        familyTree =   
           FamilyTreeSerializationHelper.Instance.  
              LoadModel(store, dslModel, null, null, null);  
        t.Commit(); // Don't forget this!  
      }  
      // Now we can read the model:  
      foreach (Person p in familyTree.People)  
      {  
        Console.WriteLine(p.Name);   
        foreach (Person child in p.Children)  
        {  
          Console.WriteLine("    " + child.Name);  
        }  
} } } }  
```  
  
## <a name="saving-to-a-file"></a>Guardar datos en un archivo  
 La adición siguiente al código anterior realiza un cambio en el modelo y, a continuación, guarda en un archivo.  
  
```  
using (Transaction t =  
  store.TransactionManager.BeginTransaction("update model"))  
{  
  // Create a new model element:  
  Person p = new Person(store);  
  // Set its embedding relationship:  
  p.FamilyTreeModel = familyTree;  
  // - same as: familyTree.People.Add(p);  
  // Set its properties:  
  p.Name = "Edward VI";  
  t.Commit(); // Don't forget this!  
}  
// Save the model:  
try  
{  
  SerializationResult result = new SerializationResult();  
  FamilyTreeSerializationHelper.Instance  
    .SaveModel(result, familyTree, @"C:\FamilyTrees\Tudor-upd.ftree");  
  // Report any error:  
  if (result.Failed)  
  {  
    foreach (SerializationMessage message in result)  
    {  
      Console.WriteLine(message);  
    }  
  }  
}  
catch (System.IO.IOException ex)  
{ ... }  
```



